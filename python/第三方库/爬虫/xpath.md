# xpath

## 语法规则

XPath 是一种用于在XML/HTML文档中定位元素的语言。

### 路径表达式

| 表达式 | 描述             |
| ------ | ---------------- |
| `/`    | 从根节点开始选择 |
| `//`   | 从任意位置选择   |
| `.`    | 当前节点         |
| `..`   | 父节点           |
| `@`    | 属性             |

### 通配符

| 通配符 | 描述         |
| ------ | ------------ |
| `*`    | 匹配任意元素 |
| `@*`   | 匹配任意属性 |

### 谓语

使用中括号来限定元素，称为谓语

| 谓语                         | 描述                                              |
| ---------------------------- | ------------------------------------------------- |
| `//a[n]`                     | n为大于零的整数，代表子元素排在第n个位置的<a>元素 |
| `//a[last()]`                | last() 代表子元素排在最后个位置的<a>元素          |
| `//a[last()-1]`              | 代表倒数第二个                                    |
| `//a[position()<3]`          | 位置序号小于3，前两个，xpath中的序列是从1开始     |
| `//a[@href]`                 | 拥有href的<a>元素                                 |
| `//a[@href="www.baidu.com"]` | href属性值为"www.baidu.com"的元素                 |
| `//book[@price>2]`           | price值大于2的<book>元素                          |

### 多个路径

| 表达式 | 描述                                   |
| ------ | -------------------------------------- |
| `\|`   | 使用\|连接两个表达式，可以进行 或 匹配 |

### 函数

| 函数                   | 描述             |
| ---------------------- | ---------------- |
| `contains(*string)`    | 包含             |
| `starts-with(*string)` | 开头为           |
| `ends-with(*string)`   | 结束为  # 不支持 |
| `upper-case(string)`   | # 不支持         |
| `text()`               | 文本内容         |
| `last()`               | 最后一个位置     |
| `position()`           | 元素位置序号     |
| `node()`               | 任意子节点       |

示例:

```python
# 选择所有div元素
//div

# 选择id为'main'的div元素
//div[@id='main']

# 选择所有a元素的href属性
//a/@href

# 选择包含'python'文本的p元素
//p[contains(text(), 'python')]
```
